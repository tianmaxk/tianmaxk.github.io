<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>流加载</title>
	</head>
	<body>
	<script>
  // Register the service worker
	if ('serviceWorker' in navigator) {
		navigator.serviceWorker.getRegistrations().then(function(regs) {
			var isfirst = false;
			for(var i=0;i<regs.length;i++){
				if(regs[i].scope.indexOf("streamrender")!=-1){
					console.log("serviceWorker loaded");
					isfirst = true;
					break;
				}
			}
		  	console.log("no serviceWorker");
			navigator.serviceWorker.register('./sw.js').then(function(registration) {
				if(isfirst){
					location.href = "first";
				}
		    });
		});
	}
	</script>
	</body>
</html>